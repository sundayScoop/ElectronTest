<!DOCTYPE html>
<html>
<head>
  <title>Hello Electron!</title>
</head>
<body>
  <h1>Hello, Electron!</h1>
  <h1 id="hey"></h1>
</body>
<script type="module">
    import {Heimdall, TidePromise, FieldData} from "https://unpkg.com/heimdall-tide@0.0.50-test/src/heimdall.js";
    
    const config = {
      vendorPublic: "JFRx67tBKknkrgD3aVbce+XdzRc0UnPau5D5ZleL1x0=",
      appOriginText: "This is my text that i signed because i couldn't make my app more secure.",
      appOriginTextSignature: "qdf9s5K8iNxMUHVb+9/LIqoK2sd4QbDB+qdmwEOpiJXDamn+SsOtFmC+jDKtdXw5gvhSEZrmma7BHsnOZVCKBw==",
      homeORKUrl: "http://localhost:1001",
      enclaveRequest: {
          getUserInfoFirst: false, // 1 step process - we will not supply a customModel halfway through the process
          refreshToken: true, // I want a TideJWT returned
          customModel: undefined // I do not want to provide a customModel
      }
    }

    const heimdall = new Heimdall(config);

    const jwt = "eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiJjZGMxOTJhOGFmNzc5NjQwMmQzYjNlYzg4YzkzMWYxZmQzODc1YjQwMGRhOGFkZjg4MGI3Y2QzMDNhODFmODA1IiwiZXhwIjoxNzAxNjU2ODE5LCJnU2Vzc0tleVB1YiI6Ik95ZForZmROdWxCMHhwYm9jWGNLY3BHSS9kUGh5YTkwKzBwWmpKalhHanM9IiwiZ1ZWSyI6IjRnT3B0NElXeDRpckx6L3BLQ3dzM1BPa2RqOG9HSDBBb0pVTXpWdXQ4VTA9In0.4XLEzkJRklN0ZQt-GBGOtHOx-esomCIP0VXioaG-8Eu1eVdGFWJg-o22i4uiOIAnImcus5w1OIs2ze9gjJwHAw";

    const tidePromise = new TidePromise();
    const fieldData = new FieldData(["password", "username"]);
    fieldData.add("test to encrypt", ["password"]);
    fieldData.add("test2", ["username"]);
    fieldData.add("test3", ["username", "password"])

    const params = [jwt, fieldData, tidePromise];

    const tideButtonAction = async (params) => {
            return heimdall.TESTencryptUserDataTEST(params);
    }

    const tideButton = heimdall.AddTideButton(tideButtonAction, params);
    const encrypted = await tidePromise.promise;
    console.log(encrypted)

</script>
</html>